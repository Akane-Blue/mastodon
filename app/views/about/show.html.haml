- content_for :header_tags do
  %script#initial-state{ type: 'application/json' }!= json_escape(@initial_state_json)
  = javascript_pack_tag 'public', integrity: true, crossorigin: 'anonymous'

- content_for :page_title do
  = site_hostname

- content_for :header_tags do
  %meta{ property: 'og:site_name', content: site_title }/
  %meta{ property: 'og:url', content: about_url }/
  %meta{ property: 'og:type', content: 'website' }/
  %meta{ property: 'og:title', content: site_hostname }/
  %meta{ property: 'og:description', content: strip_tags(@instance_presenter.site_description.presence || t('about.about_mastodon')) }/
  %meta{ property: 'og:image', content: asset_pack_path('mastodon_small.jpg', protocol: :request) }/
  %meta{ property: 'og:image:width', content: '400' }/
  %meta{ property: 'og:image:height', content: '400' }/
  %meta{ property: 'twitter:card', content: 'summary' }/

.landing-page
  .header
    .container.links
      .brand
        = link_to root_url do
          = image_tag asset_pack_path('logo.svg')
          Mastodon

      %ul.nav
        %li= link_to t('auth.login'), new_user_session_path, class: 'webapp-btn'
        %li= link_to t('about.about_this'), about_more_path
        %li= link_to t('about.other_instances'), 'https://joinmastodon.org/'

    .container.hero
      .heading
        %h1
          = @instance_presenter.site_title
          %small= t 'about.hosted_on', domain: site_hostname
      - if @instance_presenter.open_registrations
        = render 'registration'
      - else
        .closed-registrations-message
          %div
            - if @instance_presenter.closed_registrations_message.blank?
              %p= t('about.closed_registrations')
            - else
              = @instance_presenter.closed_registrations_message.html_safe
          = link_to t('about.find_another_instance'), 'https://joinmastodon.org', class: 'button button-alternative button--block'

  .learn-more-cta
    .container
      %h3= t('about.description_headline', domain: site_hostname)
      %p= @instance_presenter.site_description.html_safe.presence || t('about.generic_description', domain: site_hostname)

  .features
    .container
      #mastodon-timeline{ data: { props: Oj.dump(default_props) } }

      .about-mastodon
        %h3= t 'about.what_is_mastodon'
        %p= t 'about.about_mastodon_html'
        %a.button.button-secondary{ href: 'https://joinmastodon.org' }= t 'about.learn_more'

        .features-list
          .features-list__row
            .text
              %h6= t 'about.features.real_conversation_title'
              = t 'about.features.real_conversation_body'
            .visual
              = fa_icon 'fw comments'
          .features-list__row
            .text
              %h6= t 'about.features.not_a_product_title'
              = t 'about.features.not_a_product_body'
            .visual
              = fa_icon 'fw users'
          .features-list__row
            .text
              %h6= t 'about.features.within_reach_title'
              = t 'about.features.within_reach_body'
            .visual
              = fa_icon 'fw mobile'
          .features-list__row
            .text
              %h6= t 'about.features.humane_approach_title'
              = t 'about.features.humane_approach_body'
            .visual
              = fa_icon 'fw leaf'
